# üìä Customer Complaint Processing System

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∂–∞–ª–æ–± —Å –ø–æ–º–æ—â—å—é FastAPI, SQLite, –∞–Ω–∞–ª–∏–∑–∞ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å n8n –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

---

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

* REST API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∂–∞–ª–æ–±
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞ (Sentiment Analysis) —á–µ—Ä–µ–∑ `transformers`
* –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∂–∞–ª–æ–±—ã –≤ –æ–¥–Ω—É –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: `—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è`, `–æ–ø–ª–∞—Ç–∞`, `–¥—Ä—É–≥–æ–µ`
* –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ SQLite
* n8n-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è:

  * —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –∂–∞–ª–æ–±–∞–º
  * –∑–∞–ø–∏—Å—å –∂–∞–ª–æ–± –æ–± –æ–ø–ª–∞—Ç–µ –≤ Google Sheets
  * –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –∂–∞–ª–æ–±

---

## üåê –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

* Python 3.12+
* FastAPI
* SQLite (—á–µ—Ä–µ–∑ SQLAlchemy)
* Hugging Face `transformers` (–∞–Ω–∞–ª–∏–∑ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)
* OpenAI –∏–ª–∏ Together AI (–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞)
* n8n (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è)

---

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/yourusername/customer-complaints.git
cd customer-complaints
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```ini
OPENAI_API_KEY=sk-...
TOGETHER_API_KEY=your_together_key (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
DATABASE_URL=sqlite:///./complaints.db
PROXY_URL=http://yourproxy:port (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
```

---

## üöß –ó–∞–ø—É—Å–∫

```bash
uvicorn app.main:app --reload
```

---

## üìÑ –ü—Ä–∏–º–µ—Ä—ã API-–∑–∞–ø—Ä–æ—Å–æ–≤

### ‚úâÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ –∂–∞–ª–æ–±—ã

```bash
curl -X POST http://localhost:8000/complaints \
-H "Content-Type: application/json" \
-d '{"text": "–°–∞–π—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –æ—à–∏–±–∫–∞ 500"}'
```

### üìä –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∂–∞–ª–æ–±

```bash
curl http://localhost:8000/complaints
```

---

## ü™ú –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
report_processor/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îú‚îÄ‚îÄ schemas.py
‚îÇ   ‚îú‚îÄ‚îÄ database.py
‚îÇ   ‚îú‚îÄ‚îÄ sentiment.py
‚îÇ   ‚îú‚îÄ‚îÄ category.py
‚îÇ   ‚îî‚îÄ‚îÄ config.py
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ .env
‚îî‚îÄ‚îÄ n8n/workflow.json
```

---

## üåä n8n-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–í `n8n/workflow.json` —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —ç–∫—Å–ø–æ—Ä—Ç –≥–æ—Ç–æ–≤–æ–≥–æ workflow:

* –∫–∞–∂–¥—ã–π —á–∞—Å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç API `/complaints`
* —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ `status=open` –∏ `timestamp` –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
* –¥–ª—è –∂–∞–ª–æ–± `—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è` ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Telegram
* –¥–ª—è `–æ–ø–ª–∞—Ç–∞` ‚Üí –¥–æ–±–∞–≤–ª—è–µ—Ç —Å—Ç—Ä–æ–∫—É –≤ Google Sheets
* –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ ‚Üí –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ `closed`

–î–ª—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è:

* –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Telegram-–±–æ—Ç–∞ —á–µ—Ä–µ–∑ BotFather –∏ —É–∫–∞–∑–∞–Ω–∏–µ Chat ID
* OAuth2-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Google Sheets —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç

---

## üìä –ü—Ä–∏–º–µ—Ä –º–æ–¥–µ–ª–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```json
{
  "id": 1,
  "text": "–ù–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç SMS-–∫–æ–¥",
  "status": "open",
  "timestamp": "2025-07-06T12:33:48",
  "sentiment": "negative",
  "category": "—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è"
}
```

---

## üìä –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–§–∞–π–ª `requirements.txt` —Å–æ–¥–µ—Ä–∂–∏—Ç:

```
fastapi
uvicorn
sqlalchemy
transformers
torch
httpx
python-dotenv
openai
```

---

## üîß TODO / –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
* [ ] Docker-–æ–±—ë—Ä—Ç–∫–∞
